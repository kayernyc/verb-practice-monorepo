import verbIsInseparable from '../propertyTestFunctions/inseparable';
import { processStemSubstitution } from '@germanUtilities/processStemSubstitution';

export function irregularPartizipConjugation({
  stem,
  partizip,
  pr채teritum,
  infinitive,
  weakEndings,
}: {
  stem: string;
  partizip?: string;
  pr채teritum?: string;
  infinitive: string;
  weakEndings?: boolean;
}) {
  if (verbIsInseparable(infinitive)) {
    return `${stem}t`;
  }

  if (!partizip) {
    if (weakEndings && pr채teritum) {
      const newStem = processStemSubstitution({
        regularStem: stem,
        irregularStem: pr채teritum,
      });
      return `ge${newStem}t`;
    }
  }

  let builtStem = stem;
  if (partizip) {
    builtStem = processStemSubstitution({
      regularStem: stem,
      irregularStem: partizip,
    });
    builtStem = `ge${builtStem}`;
  }

  return `${builtStem}${weakEndings ? 't' : 'en'}`;
}
